<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products Details - RedStore</title>
    <link rel="icon" href="bizweb.dktcdn.net/100/476/122/themes/893407/assets/favicon.png?1688462486084">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div class="continer">
        <div class="navbar">
            <div class="logo">
                <a href="index.html"><img src="images/logo.png" alt=""></a>
            </div>
            <nav>
                <ul id="menuItems">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html">Product</a></li>
                    <li><a href="">About</a></li>
                    <li><a href="">Contact</a></li>
                    <li><a href="admin.html">Account</a></li>
                </ul>
            </nav>
            <a href="cart.html"><img src="images/cart.png" width="30px" height="30px"></a>
            <img src="images/menu.png" class="menu-icon" onclick="menutoggle()">
        </div>
    </div>

    <!-- single product details -->

    <div class="small-container single-product">
        <div class="row" id="product_details">
            <!-- <div class="col-2">
                <img src="images/gallery-1.jpg" width="100%" id="productImg">

                <div class="small-img-row">
                    <div class="small-img-col">
                        <img src="images/gallery-1.jpg" class="small-img">
                    </div>
                    <div class="small-img-col">
                        <img src="images/gallery-2.jpg" class="small-img">
                    </div>
                    <div class="small-img-col">
                        <img src="images/gallery-3.jpg" class="small-img">
                    </div>
                    <div class="small-img-col">
                        <img src="images/gallery-4.jpg" class="small-img">
                    </div>
                </div>

            </div>
            <div class="col-2">
                <p>Home / T-Shirt</p>
                <h1>Red Printd T-Shirt by HRX</h1>
                <h4>$50.00</h4>
                <select>
                    <option>Select Size</option>
                    <option>S</option>
                    <option>M</option>
                    <option>L</option>
                    <option>XL</option>
                    <option>XXL</option>
                </select>
                <input type="number" value="1">
                <a href="" class="btn">Add To Cart</a>

                <h3>Product Details <i class="fa fa-indent"></i></h3>
                <br>
                <p>Give your sumer wardrobe a style upgrade with the HRX
                    Men's Active T-Shirt. Team it with a pair of shorts for
                    your morning workout or a denims for an evening out with
                    the guys.</p>
            </div> -->
        </div>
    </div>

    <!-- title -->

    <div class="small-container">
        <div class="row row-2">
            <h2>Related Products</h2>
            <p>View More</p>
        </div>
    </div>

    <!-- product -->

    <div class="small-container">

        <div class="row">
            <div class="col-4">
                <img src="images/product-9.jpg" alt="">
                <h4>Red Printed T-shirt</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <p>$50.00</p>
            </div>
            <div class="col-4">
                <img src="images/product-10.jpg" alt="">
                <h4>Red Printed T-shirt</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <p>$50.00</p>
            </div>
            <div class="col-4">
                <img src="images/product-11.jpg" alt="">
                <h4>Red Printed T-shirt</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <p>$50.00</p>
            </div>
            <div class="col-4">
                <img src="images/product-12.jpg" alt="">
                <h4>Red Printed T-shirt</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-half-o"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <p>$50.00</p>
            </div>
        </div>
    </div>

    <!-- footer -->

    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="footer-col-1">
                    <h3>Download Our App</h3>
                    <p>Download App for Android anh ios mobile phone.</p>
                    <div class="app-logo">
                        <img src="images/play-store.png">
                        <img src="images/app-store.png">
                    </div>
                </div>
                <div class="footer-col-2">
                    <img src="images/logo-white.png">
                    <p>Our Purpose Is To Sustainably Make the Pleasure and
                        Benefits of Sports Accessible to the Many.</p>
                </div>
                <div class="footer-col-3">
                    <h3>Useful Links</h3>
                    <ul>
                        <li>Coupons</li>
                        <li>Blog Post</li>
                        <li>Return Policy</li>
                        <li>Join Affiliate</li>
                    </ul>
                </div>
                <div class="footer-col-4">
                    <h3>Follow us</h3>
                    <ul>
                        <li>Facebook</li>
                        <li>Twitter</li>
                        <li>Instagram</li>
                        <li>YouTube</li>
                    </ul>
                </div>
            </div>
            <hr>
            <p class="copyright">Copyright 2023 - Easy Tutorial</p>
        </div>
    </div>
    <!-- js for toggle menu -->
    <script>
        var menuItems = document.getElementById("menuItems");

        menuItems.style.maxHeight = "0px";

        function menutoggle() {
            if (menuItems.style.maxHeight == "0px") {
                menuItems.style.maxHeight = "200px";
            } else {
                menuItems.style.maxHeight = "0px";
            }
        }
    </script>
    <!-- js for product gallery -->
    <script>
        var productImg = document.getElementById("productImg");
        var smallImg = document.getElementsByClassName("small-img");

        smallImg[0].onclick = function () {
            productImg.src = smallImg[0].src;
        }
        smallImg[1].onclick = function () {
            productImg.src = smallImg[1].src;
        }
        smallImg[2].onclick = function () {
            productImg.src = smallImg[2].src;
        }
        smallImg[3].onclick = function () {
            productImg.src = smallImg[3].src;
        }
    </script>

    <script src="data.js"></script>
    <script>
        let product_detailsHtml = ``;
        let id = location.href.split("id=")[1];
        console.log(id);
        products.forEach((product) => {
            if (product.id == id) {
                console.log(product);
                product_detailsHtml += `
                <div class="col-2">
                    <img src="${product.src}" width="100%" id="productImg">
                </div>
                    <div class="col-2">
                        <p>Home / T-Shirt</p>
                        <h1>${product.name}</h1>
                        <h4>$${product.price}</h4>
                        <select id="size">
                            <option value="S">S</option>
                            <option value="M">M</option>
                            <option value="L">L</option>
                            <option value="XL">XL</option>
                            <option value="XXL">XXL</option>
                        </select>
                        <input id="numbers" type="number" value="1" min="1" max="9" onchange="updatePrice()">
                        <a onclick='addToCart(${JSON.stringify(product)})' class="btn">Add To Cart</a>

                        <h3>Product Details <i class="fa fa-indent"></i></h3>
                        <br>
                        <p>Give your sumer wardrobe a style upgrade with the HRX
                        Men's Active T-Shirt. Team it with a pair of shorts for
                        your morning workout or a denims for an evening out with
                        the guys.</p>
                    </div>
                `
            }
            document.getElementById("product_details").innerHTML = product_detailsHtml;
        });
        function addToCart(product) {
            console.log(product);
            // Lấy ra size mà khách hàng chọn
            let size = document.getElementById("size").value;
            // Lấy ra số lượng mà khách hàng chọn
            let quantity = document.getElementById("numbers").value


            // tính tổng tiền khi khách hàng chọn số lượng
            let total = product.price * quantity;

            // Kiểm tra nếu như khách hàng order trùng sản phẩm, và size
            let checkEqual = false;
            //Thì tăng số lượng lên
            for (i = 0; i < carts.length; i++) {
                if (product.name == carts[i].name && size == carts[i].size) {
                    carts[i].quantity = +carts[i].quantity + +quantity;
                    carts[i].total += (quantity * product.price)
                    checkEqual = true;
                } parseInt
            }
            if (!checkEqual) {
                //Ngược lại thì thêm mới sản phẩm vào giỏ hàng
                // Xử lý id tự tăng
                let id;
                if (carts.length == 0) { // Nếu như carts đang rỗng, tức là không có sản phẩm nào trong giỏ hàng, thì id sẽ là 1
                    id = 1
                } else { //Ngược lại, nếu trong carts đã có sản phẩm, thì id sẽ lấy id cuối cùng trong giỏ hàng và cộng lên 1
                    id = carts[carts.length - 1].id + 1;
                }

                // Tạo ra 1 sản phẩm trong giỏ hàng
                let cart = {
                    id: id,
                    idProduct: product.id,
                    src: product.src,
                    name: product.name,
                    price: product.price,
                    quantity: quantity,
                    size: size,
                    total: total,
                }

                // Thêm sản phẩm đó vào trong list carts
                carts.push(cart)
            }


            // Set list carts vào localStorage để lưu trữ
            localStorage.setItem("carts", JSON.stringify(carts))
            console.log(carts);
            alert("Thêm vào giỏ hàng thành công")
            location.reload();
        }
    </script>
</body>
</html>